<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio de Sesión</title>
    <link rel="icon" type="image/png" href="./Resources/tablogo.png">
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./Styles/stylelogin.css">
</head>

<body>
    <!-- Contenedor agrupado: logo + video/texto (ahora a la izquierda) -->
    <div class="logo-corner-container">
        <img id="logo" src="./Resources/tuxfreedomlogo.png" alt="Logo Tux Freedom">
        <div class="corner-text">
            <video id="introVideo" autoplay muted loop>
                <source src="./Resources/intro.mp4" type="video/mp4">
                Tu navegador no soporta el elemento de video.
            </video>
            <h2>INICIA SESIÓN PARA COMENZAR TU MISIÓN:</h2> 
            <p>¡Ayuda a Tux a esquivar sistemas invasores y mantener la libertad del software!</p>  
        </div>
    </div>

    <div class="card">
        <h1>Iniciar Sesión</h1>
        <form id="loginForm">
            <label for="username">Correo Electrónico:</label>
            <input type="email" id="usernameInput" name="username" required>

            <label for="password">Contraseña:</label>
            <input type="password" id="passwordInput" name="password" required>
           
            <button type="submit">Iniciar sesión</button>
        </form>
        <p id="mensaje" style="color:red; font-weight:bold;"></p>
        
        <hr>
        <h3>¿No tienes cuenta?</h3>
        <label for="emailReg">Correo Electrónico:</label>
        <input type="email" id="emailReg">
        <label for="passReg">Contraseña:</label>
        <input type="password" id="passReg">
        <button id="btnReg">Registrarse</button>
    </div>

    <script type="module" src="./JS/firebase_config.js"></script>
    <script type="module" src="./JS/auth.js"></script>
    <script type="module" src="./JS/login.js"></script>

    <!-- Corregido: el nombre del archivo con la 'n' de background -->
    <script type="module" src="./JS/set-background.js"></script>
    
    <!-- Script para manejar el video con pausa de 3 segundos -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const video = document.getElementById('introVideo');
            
            if (video) {
                // Configurar el video para que se reproduzca con pausa
                video.addEventListener('ended', function() {
                    // Pausar por 3 segundos antes de repetir
                    setTimeout(function() {
                        video.currentTime = 0;
                        video.play().catch(e => console.log('Error reproduciendo video:', e));
                    }, 3000); // 3 segundos de pausa
                });
                
                // Iniciar la reproducción automática
                video.play().catch(e => {
                    console.log('La reproducción automática fue bloqueada:', e);
                    // Intentar reproducir cuando el usuario interactúe
                    document.addEventListener('click', function() {
                        video.play().catch(e => console.log('Error en reproducción manual:', e));
                    }, { once: true });
                });
            }
        });
    </script>

</body>

</html>